<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>مشاوره اختصاصی | وب سلامتی</title>
    <!-- بوت‌استرپ -->
    <link rel="stylesheet" href="css/bootstrap.rtl.min.css">
    <!-- استایل‌های سفارشی -->
    <link rel="stylesheet" href="css/private-consulation.css">
        <!-- بوت‌استرپ -->
        <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" rel="stylesheet">
        <link rel="stylesheet" href="css/admin-consultation.css">
    
        <link rel="stylesheet" href="css/newStyle.css">
    
        <link rel="stylesheet" href="css/style.css">
    </head>
<style>


/*  recording buuton  */
#action-button {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            font-size: 20px;
            transition: all 0.3s ease;
        }

        #action-button.recording {
            background-color: #cbcb5a !important;
            box-shadow: 0 0 10px rgba(217, 83, 161, 0.5);
        }
        #action-button:hover {
            background-color: #f1f1f1;
            color: #333;
            margin-right: auto;
            text-align: left;
        }


</style>
</head>
<body>
    <script src="js/private-consultation.js"></script>

    <!-- هدر -->
    <header class="navbar navbar-expand-lg navbar-light bg-light shadow-sm">
        <div class="container">
            <a class="navbar-brand" href="index.html">وب سلامتی</a>

            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav me-auto">
                    <li class="nav-item"><a class="nav-link" href="index.html">خانه</a></li>
                    <li class="nav-item"><a class="nav-link" href="products.html">محصولات</a></li>
                    <li class="nav-item"><a class="nav-link active" href="login.html">ورود</a></li>
                    <li class="nav-item"><a class="nav-link" href="register.html">ثبت‌نام</a></li>
                    <li class="nav-item"><a class="nav-link" href="contact.html">تماس با ما</a></li>
                    <li class="nav-item"><a class="nav-link active" href="central-const.html">مشاوره</a></li>

                </ul>
            </div>
        </div>
    </header>

    <main class="container my-5">
        <h2 class="text-center mb-4">مشاوره اختصاصی</h2>
        <p class="text-center mb-5">لطفاً اطلاعات خود را وارد کنید و در صورت نیاز، تصاویر سونوگرافی خود را ارسال کنید.</p>

        <form action="#" method="POST" enctype="multipart/form-data" class="p-4 border rounded shadow-sm bg-white" style="max-width: 500px; margin: 0 auto;">
            <!-- نام و نام خانوادگی -->
            <div class="form-floating mb-3">
                <input type="text" class="form-control" id="name" name="name" placeholder="نام و نام خانوادگی" required>
                <label for="name">نام و نام خانوادگی</label>
            </div>

            <!-- شماره تماس -->
            <div class="form-floating mb-3">
                <input type="tel" class="form-control" id="phone" name="phone" placeholder="شماره تماس" required>
                <label for="phone">شماره تماس</label>
            </div>

            <!-- موضوع مشاوره -->
            <div class="form-floating mb-3">
                <textarea class="form-control" id="topic" name="topic" placeholder="موضوع مشاوره" rows="5" style="height: 100px;" required></textarea>
                <label for="topic">شرح حال خود را به طور کامل شرح دهید</label>
            </div>

            <!-- آپلود عکس -->
            <div class="mb-3">
                <label for="images" class="form-label">ارسال عکس سونوگرافی (حداکثر 5 عکس)</label>
                <input type="file" class="form-control" id="images" name="images[]" accept="image/*" multiple required>
                    <!-- پیام خطا -->
                     <small id="error-message" class="text-danger d-none">پیام خطا در اینجا نمایش داده می‌شود.</small>
    
                     <small class="text-muted">فرمت‌های قابل قبول: JPG، PNG، JPEG</small>                
            </div>

                   <!-- بخش پیش‌نمایش تصاویر -->
                   <div id="preview-container" class="row g-3 mt-3">
                   <!-- پیش‌نمایش فایل‌ها اینجا نمایش داده می‌شود -->
                   </div>

                     <!-- ضبط ویس -->
                     <div class="audio-control">
                        <button type="button" id="record-button" class="action-button" >🎙️</button>
                        <span id="record-status" class="text-muted">برای ضبط دکمه را نگه دارید</span>
                    </div>
        
                    <!-- نمایش پیش‌نمایش فایل‌های صوتی -->
                    <div id="audio-preview" class="audio-preview"></div>
        
                    <!-- دکمه ارسال -->
                    <button type="submit" id="special-consultation-button" class="btn btn-apple btn-lg w-100 mt-3" >ارسال درخواست</button>
        </form>
    </main>
        

 <script src="js/bootstrap.bundle.min.js"></script>

    
    <!-- دکمه‌های شناور -->
    <div id="menu-btn" class="floating-btn">
        <span>&#9776;</span> <!-- آیکن همبرگر -->
    </div>
    <div id="cart-btn" class="floating-btn" >
        <span>💬</span> <!-- آیکن جدید برای مشاوره‌ها -->
    </div>

    <div id="profile-btn" class="floating-btn">
        <span>&#128100;</span> <!-- آیکن پروفایل -->
    </div>

    <!-- منو شناور -->
    <div id="menu" class="menu">
        <div class="menu-item"><a href="index.html"><i class="fas fa-home"></i> خانه</a></div>
        <div class="menu-item"><a href="products.html"><i class="fas fa-box"></i> محصولات</a></div>
        <div class="menu-item"><a href="about.html"><i class="fas fa-info-circle"></i> درباره ما</a></div>
        <div class="menu-item"><a href="contact.html"><i class="fas fa-envelope"></i> تماس با ما</a></div>
        <div class="menu-item"><a href="central-const.html"><i class="fas fa-envelope"></i> مشاوره‌ها</a></div>

        <div class="menu-item"><a href="login.html"><i class="fas fa-sign-in-alt"></i> ورود</a></div>
        <div class="menu-item"><a href="logout.html"><i class="fas fa-sign-out-alt"></i> خروج</a></div>
        <div class="menu-item search-box">
            <div class="search-container">
                <input type="text" id="search-input" placeholder="جستجو کنید..." />
                <i class="fas fa-search"></i>
            </div>
            <ul id="search-results" class="search-results">
                <!-- نتایج جستجو به صورت داینامیک در اینجا ظاهر می‌شوند -->
            </ul>
    </div>
        
    </div>

    <!-- سبد خرید -->
    <div class="offcanvas offcanvas-end" tabindex="-1" id="cart" aria-labelledby="cartLabel">
        <div class="offcanvas-header">
            <h5 id="cartLabel">خوش آمدید</h5>
            <button type="button" class="btn-close text-reset" data-bs-dismiss="offcanvas" aria-label="Close"></button>
        </div>
        <div class="offcanvas-body">
         
            <button class="btn btn-success w-100 mt-3"></button>
            <button class="btn btn-success w-100 mt-3"></button>
            <button class="btn btn-success w-100 mt-3"></button>
            <button class="btn btn-success w-100 mt-3"></button>
            <button class="btn btn-success w-100 mt-3"></button>
            <button class="btn btn-success w-100 mt-3"></button>
            <button class="btn btn-success w-100 mt-3"></button>
        </div>
    </div>

    <!-- پروفایل کاربری -->
    <div class="offcanvas offcanvas-start" tabindex="-1" id="profile" aria-labelledby="profileLabel">
        <div class="offcanvas-header">
            <h5 id="profileLabel">پروفایل کاربری</h5>
            <button type="button" class="btn-close text-reset" data-bs-dismiss="offcanvas" aria-label="Close"></button>
        </div>
        <div class="offcanvas-body">
            <div class="profile-header">
                <img src="images/ico/prof2.jpg" alt="Profile Picture" class="img-fluid rounded-circle">
                <h5>نام کاربر</h5>
                <p>user@example.com</p>
            </div>
            <ul class="profile-menu">
                <li><i class="fas fa-shopping-bag"></i> خریدهای من</li>
                <li><i class="fas fa-comments"></i> مشاوره‌های من</li>
            </ul>

            <ul class="profile-menu-footer">
                <li><i class="fas fa-shopping-bag"></i> صفحه اینستاگرام سلامتی</li>
                <li><i class="fas fa-comments"></i> صفحه تلگرام سلامتی</li>
            </ul>
        </div>
    </div>


    <footer class="bg-dark text-light py-4">
        <div class="container text-center">
            <p>تمامی حقوق محفوظ است &copy; 2024</p>
        </div>
    </footer>

    <script src="js/bootstrap.bundle.min.js"></script>
    <script  src="js/template.js">    </script>
    <script  src="js/admin-consultation.js">    </script>
    <!-- اسکریپت‌ها -->
    <script src="js/bootstrap.bundle.min.js"></script>
    <script src="js/allcons.js"></script>



<script>
        const recordButton = document.getElementById("record-button");
        const recordStatus = document.getElementById("record-status");
        const audioPreview = document.getElementById("audio-preview");

        let mediaRecorder;
        let audioChunks = [];
        let isRecording = false;

        // شروع ضبط هنگام نگه داشتن دکمه
        recordButton.addEventListener("mousedown", async () => {
            if (!navigator.mediaDevices || !navigator.mediaDevices.getUserMedia) {
                alert("مرورگر شما قابلیت ضبط صدا را پشتیبانی نمی‌کند.");
                return;
            }

            try {
                const stream = await navigator.mediaDevices.getUserMedia({ audio: true });
                mediaRecorder = new MediaRecorder(stream);

                // وقتی ضبط شروع می‌شود
                mediaRecorder.start();
                isRecording = true;
                recordStatus.textContent = "در حال ضبط...";
                audioChunks = [];

                mediaRecorder.addEventListener("dataavailable", event => {
                    audioChunks.push(event.data);
                });
            } catch (error) {
                console.error("خطا در دسترسی به میکروفون:", error);
            }
        });

        // توقف ضبط هنگام برداشتن دست
        recordButton.addEventListener("mouseup", () => {
            if (isRecording && mediaRecorder) {
                mediaRecorder.stop();
                isRecording = false;
                recordStatus.textContent = "برای ضبط دوباره دکمه را نگه دارید";

                mediaRecorder.addEventListener("stop", () => {
                    const audioBlob = new Blob(audioChunks, { type: "audio/mp3" });
                    const audioUrl = URL.createObjectURL(audioBlob);

                    // نمایش پیش‌نمایش فایل صوتی
                    const audioElement = document.createElement("audio");
                    audioElement.src = audioUrl;
                    audioElement.controls = true;

                    // افزودن دکمه حذف به فایل صوتی
                    const deleteButton = document.createElement("button");
                    deleteButton.textContent = "حذف";
                    deleteButton.classList.add("btn", "btn-danger", "mt-2");

                    // حذف فایل صوتی و دکمه مربوطه
                    deleteButton.addEventListener("click", () => {
                        audioPreview.removeChild(audioElement);
                        audioPreview.removeChild(deleteButton);
                    });

                    // افزودن به پیش‌نمایش
                    audioPreview.appendChild(audioElement);
                    audioPreview.appendChild(deleteButton);
                });
            }
        });

        // سازگاری برای لمس (Touch Devices)
        recordButton.addEventListener("touchstart", (e) => {
            e.preventDefault();
            recordButton.dispatchEvent(new Event("mousedown"));
        });

        recordButton.addEventListener("touchend", (e) => {
            e.preventDefault();
            recordButton.dispatchEvent(new Event("mouseup"));
        });
    </script>


</body>
</html>
