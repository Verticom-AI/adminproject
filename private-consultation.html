<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ูุดุงูุฑู ุงุฎุชุตุงุต | ูุจ ุณูุงูุช</title>
    <!-- ุจูุชโุงุณุชุฑูพ -->
    <link rel="stylesheet" href="css/bootstrap.rtl.min.css">
    <!-- ุงุณุชุงูโูุง ุณูุงุฑุด -->
    <link rel="stylesheet" href="css/private-consulation.css">
        <!-- ุจูุชโุงุณุชุฑูพ -->
        <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" rel="stylesheet">
        <link rel="stylesheet" href="css/admin-consultation.css">
    
        <link rel="stylesheet" href="css/newStyle.css">
    
        <link rel="stylesheet" href="css/style.css">
    </head>
<style>


/*  recording buuton  */
#action-button {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            font-size: 20px;
            transition: all 0.3s ease;
        }

        #action-button.recording {
            background-color: #cbcb5a !important;
            box-shadow: 0 0 10px rgba(217, 83, 161, 0.5);
        }
        #action-button:hover {
            background-color: #f1f1f1;
            color: #333;
            margin-right: auto;
            text-align: left;
        }


</style>
</head>
<body>
    <script src="js/private-consultation.js"></script>

    <!-- ูุฏุฑ -->
    <header class="navbar navbar-expand-lg navbar-light bg-light shadow-sm">
        <div class="container">
            <a class="navbar-brand" href="index.html">ูุจ ุณูุงูุช</a>

            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav me-auto">
                    <li class="nav-item"><a class="nav-link" href="index.html">ุฎุงูู</a></li>
                    <li class="nav-item"><a class="nav-link" href="products.html">ูุญุตููุงุช</a></li>
                    <li class="nav-item"><a class="nav-link active" href="login.html">ูุฑูุฏ</a></li>
                    <li class="nav-item"><a class="nav-link" href="register.html">ุซุจุชโูุงู</a></li>
                    <li class="nav-item"><a class="nav-link" href="contact.html">ุชูุงุณ ุจุง ูุง</a></li>
                    <li class="nav-item"><a class="nav-link active" href="central-const.html">ูุดุงูุฑู</a></li>

                </ul>
            </div>
        </div>
    </header>

    <main class="container my-5">
        <h2 class="text-center mb-4">ูุดุงูุฑู ุงุฎุชุตุงุต</h2>
        <p class="text-center mb-5">ูุทูุงู ุงุทูุงุนุงุช ุฎูุฏ ุฑุง ูุงุฑุฏ ฺฉูุฏ ู ุฏุฑ ุตูุฑุช ูุงุฒุ ุชุตุงูุฑ ุณูููฺฏุฑุงู ุฎูุฏ ุฑุง ุงุฑุณุงู ฺฉูุฏ.</p>

        <form action="#" method="POST" enctype="multipart/form-data" class="p-4 border rounded shadow-sm bg-white" style="max-width: 500px; margin: 0 auto;">
            <!-- ูุงู ู ูุงู ุฎุงููุงุฏฺฏ -->
            <div class="form-floating mb-3">
                <input type="text" class="form-control" id="name" name="name" placeholder="ูุงู ู ูุงู ุฎุงููุงุฏฺฏ" required>
                <label for="name">ูุงู ู ูุงู ุฎุงููุงุฏฺฏ</label>
            </div>

            <!-- ุดูุงุฑู ุชูุงุณ -->
            <div class="form-floating mb-3">
                <input type="tel" class="form-control" id="phone" name="phone" placeholder="ุดูุงุฑู ุชูุงุณ" required>
                <label for="phone">ุดูุงุฑู ุชูุงุณ</label>
            </div>

            <!-- ููุถูุน ูุดุงูุฑู -->
            <div class="form-floating mb-3">
                <textarea class="form-control" id="topic" name="topic" placeholder="ููุถูุน ูุดุงูุฑู" rows="5" style="height: 100px;" required></textarea>
                <label for="topic">ุดุฑุญ ุญุงู ุฎูุฏ ุฑุง ุจู ุทูุฑ ฺฉุงูู ุดุฑุญ ุฏูุฏ</label>
            </div>

            <!-- ุขูพููุฏ ุนฺฉุณ -->
            <div class="mb-3">
                <label for="images" class="form-label">ุงุฑุณุงู ุนฺฉุณ ุณูููฺฏุฑุงู (ุญุฏุงฺฉุซุฑ 5 ุนฺฉุณ)</label>
                <input type="file" class="form-control" id="images" name="images[]" accept="image/*" multiple required>
                    <!-- ูพุงู ุฎุทุง -->
                     <small id="error-message" class="text-danger d-none">ูพุงู ุฎุทุง ุฏุฑ ุงูุฌุง ููุงุด ุฏุงุฏู ูโุดูุฏ.</small>
    
                     <small class="text-muted">ูุฑูุชโูุง ูุงุจู ูุจูู: JPGุ PNGุ JPEG</small>                
            </div>

                   <!-- ุจุฎุด ูพุดโููุงุด ุชุตุงูุฑ -->
                   <div id="preview-container" class="row g-3 mt-3">
                   <!-- ูพุดโููุงุด ูุงูโูุง ุงูุฌุง ููุงุด ุฏุงุฏู ูโุดูุฏ -->
                   </div>

                     <!-- ุถุจุท ูุณ -->
                     <div class="audio-control">
                        <button type="button" id="record-button" class="action-button" >๐๏ธ</button>
                        <span id="record-status" class="text-muted">ุจุฑุง ุถุจุท ุฏฺฉูู ุฑุง ูฺฏู ุฏุงุฑุฏ</span>
                    </div>
        
                    <!-- ููุงุด ูพุดโููุงุด ูุงูโูุง ุตูุช -->
                    <div id="audio-preview" class="audio-preview"></div>
        
                    <!-- ุฏฺฉูู ุงุฑุณุงู -->
                    <button type="submit" id="special-consultation-button" class="btn btn-apple btn-lg w-100 mt-3" >ุงุฑุณุงู ุฏุฑุฎูุงุณุช</button>
        </form>
    </main>
        

 <script src="js/bootstrap.bundle.min.js"></script>

    
    <!-- ุฏฺฉููโูุง ุดูุงูุฑ -->
    <div id="menu-btn" class="floating-btn">
        <span>&#9776;</span> <!-- ุขฺฉู ููุจุฑฺฏุฑ -->
    </div>
    <div id="cart-btn" class="floating-btn" >
        <span>๐ฌ</span> <!-- ุขฺฉู ุฌุฏุฏ ุจุฑุง ูุดุงูุฑูโูุง -->
    </div>

    <div id="profile-btn" class="floating-btn">
        <span>&#128100;</span> <!-- ุขฺฉู ูพุฑููุงู -->
    </div>

    <!-- ููู ุดูุงูุฑ -->
    <div id="menu" class="menu">
        <div class="menu-item"><a href="index.html"><i class="fas fa-home"></i> ุฎุงูู</a></div>
        <div class="menu-item"><a href="products.html"><i class="fas fa-box"></i> ูุญุตููุงุช</a></div>
        <div class="menu-item"><a href="about.html"><i class="fas fa-info-circle"></i> ุฏุฑุจุงุฑู ูุง</a></div>
        <div class="menu-item"><a href="contact.html"><i class="fas fa-envelope"></i> ุชูุงุณ ุจุง ูุง</a></div>
        <div class="menu-item"><a href="central-const.html"><i class="fas fa-envelope"></i> ูุดุงูุฑูโูุง</a></div>

        <div class="menu-item"><a href="login.html"><i class="fas fa-sign-in-alt"></i> ูุฑูุฏ</a></div>
        <div class="menu-item"><a href="logout.html"><i class="fas fa-sign-out-alt"></i> ุฎุฑูุฌ</a></div>
        <div class="menu-item search-box">
            <div class="search-container">
                <input type="text" id="search-input" placeholder="ุฌุณุชุฌู ฺฉูุฏ..." />
                <i class="fas fa-search"></i>
            </div>
            <ul id="search-results" class="search-results">
                <!-- ูุชุงุฌ ุฌุณุชุฌู ุจู ุตูุฑุช ุฏุงูุงูฺฉ ุฏุฑ ุงูุฌุง ุธุงูุฑ ูโุดููุฏ -->
            </ul>
    </div>
        
    </div>

    <!-- ุณุจุฏ ุฎุฑุฏ -->
    <div class="offcanvas offcanvas-end" tabindex="-1" id="cart" aria-labelledby="cartLabel">
        <div class="offcanvas-header">
            <h5 id="cartLabel">ุฎูุด ุขูุฏุฏ</h5>
            <button type="button" class="btn-close text-reset" data-bs-dismiss="offcanvas" aria-label="Close"></button>
        </div>
        <div class="offcanvas-body">
         
            <button class="btn btn-success w-100 mt-3"></button>
            <button class="btn btn-success w-100 mt-3"></button>
            <button class="btn btn-success w-100 mt-3"></button>
            <button class="btn btn-success w-100 mt-3"></button>
            <button class="btn btn-success w-100 mt-3"></button>
            <button class="btn btn-success w-100 mt-3"></button>
            <button class="btn btn-success w-100 mt-3"></button>
        </div>
    </div>

    <!-- ูพุฑููุงู ฺฉุงุฑุจุฑ -->
    <div class="offcanvas offcanvas-start" tabindex="-1" id="profile" aria-labelledby="profileLabel">
        <div class="offcanvas-header">
            <h5 id="profileLabel">ูพุฑููุงู ฺฉุงุฑุจุฑ</h5>
            <button type="button" class="btn-close text-reset" data-bs-dismiss="offcanvas" aria-label="Close"></button>
        </div>
        <div class="offcanvas-body">
            <div class="profile-header">
                <img src="images/ico/prof2.jpg" alt="Profile Picture" class="img-fluid rounded-circle">
                <h5>ูุงู ฺฉุงุฑุจุฑ</h5>
                <p>user@example.com</p>
            </div>
            <ul class="profile-menu">
                <li><i class="fas fa-shopping-bag"></i> ุฎุฑุฏูุง ูู</li>
                <li><i class="fas fa-comments"></i> ูุดุงูุฑูโูุง ูู</li>
            </ul>

            <ul class="profile-menu-footer">
                <li><i class="fas fa-shopping-bag"></i> ุตูุญู ุงูุณุชุงฺฏุฑุงู ุณูุงูุช</li>
                <li><i class="fas fa-comments"></i> ุตูุญู ุชูฺฏุฑุงู ุณูุงูุช</li>
            </ul>
        </div>
    </div>


    <footer class="bg-dark text-light py-4">
        <div class="container text-center">
            <p>ุชูุงู ุญููู ูุญููุธ ุงุณุช &copy; 2024</p>
        </div>
    </footer>

    <script src="js/bootstrap.bundle.min.js"></script>
    <script  src="js/template.js">    </script>
    <script  src="js/admin-consultation.js">    </script>
    <!-- ุงุณฺฉุฑูพุชโูุง -->
    <script src="js/bootstrap.bundle.min.js"></script>
    <script src="js/allcons.js"></script>



<script>
        const recordButton = document.getElementById("record-button");
        const recordStatus = document.getElementById("record-status");
        const audioPreview = document.getElementById("audio-preview");

        let mediaRecorder;
        let audioChunks = [];
        let isRecording = false;

        // ุดุฑูุน ุถุจุท ููฺฏุงู ูฺฏู ุฏุงุดุชู ุฏฺฉูู
        recordButton.addEventListener("mousedown", async () => {
            if (!navigator.mediaDevices || !navigator.mediaDevices.getUserMedia) {
                alert("ูุฑูุฑฺฏุฑ ุดูุง ูุงุจูุช ุถุจุท ุตุฏุง ุฑุง ูพุดุชุจุงู ููโฺฉูุฏ.");
                return;
            }

            try {
                const stream = await navigator.mediaDevices.getUserMedia({ audio: true });
                mediaRecorder = new MediaRecorder(stream);

                // ููุช ุถุจุท ุดุฑูุน ูโุดูุฏ
                mediaRecorder.start();
                isRecording = true;
                recordStatus.textContent = "ุฏุฑ ุญุงู ุถุจุท...";
                audioChunks = [];

                mediaRecorder.addEventListener("dataavailable", event => {
                    audioChunks.push(event.data);
                });
            } catch (error) {
                console.error("ุฎุทุง ุฏุฑ ุฏุณุชุฑุณ ุจู ูฺฉุฑูููู:", error);
            }
        });

        // ุชููู ุถุจุท ููฺฏุงู ุจุฑุฏุงุดุชู ุฏุณุช
        recordButton.addEventListener("mouseup", () => {
            if (isRecording && mediaRecorder) {
                mediaRecorder.stop();
                isRecording = false;
                recordStatus.textContent = "ุจุฑุง ุถุจุท ุฏูุจุงุฑู ุฏฺฉูู ุฑุง ูฺฏู ุฏุงุฑุฏ";

                mediaRecorder.addEventListener("stop", () => {
                    const audioBlob = new Blob(audioChunks, { type: "audio/mp3" });
                    const audioUrl = URL.createObjectURL(audioBlob);

                    // ููุงุด ูพุดโููุงุด ูุงู ุตูุช
                    const audioElement = document.createElement("audio");
                    audioElement.src = audioUrl;
                    audioElement.controls = true;

                    // ุงูุฒูุฏู ุฏฺฉูู ุญุฐู ุจู ูุงู ุตูุช
                    const deleteButton = document.createElement("button");
                    deleteButton.textContent = "ุญุฐู";
                    deleteButton.classList.add("btn", "btn-danger", "mt-2");

                    // ุญุฐู ูุงู ุตูุช ู ุฏฺฉูู ูุฑุจูุทู
                    deleteButton.addEventListener("click", () => {
                        audioPreview.removeChild(audioElement);
                        audioPreview.removeChild(deleteButton);
                    });

                    // ุงูุฒูุฏู ุจู ูพุดโููุงุด
                    audioPreview.appendChild(audioElement);
                    audioPreview.appendChild(deleteButton);
                });
            }
        });

        // ุณุงุฒฺฏุงุฑ ุจุฑุง ููุณ (Touch Devices)
        recordButton.addEventListener("touchstart", (e) => {
            e.preventDefault();
            recordButton.dispatchEvent(new Event("mousedown"));
        });

        recordButton.addEventListener("touchend", (e) => {
            e.preventDefault();
            recordButton.dispatchEvent(new Event("mouseup"));
        });
    </script>


</body>
</html>
